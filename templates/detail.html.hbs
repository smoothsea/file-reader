<div id="content" style="display:none">
    {{ content }}
</div>

<script src="https://cdnjs.gtimg.com/cdnjs/libs/zepto/1.1.4/zepto.min.js"></script>
<script>
    var content = '';
    var seek = {{ seek }};
    var path = '{{ file_path }}';
    
    function handleContent(content) {
        return content.replace(/(\r|\n|\r\n)/g, '<br>');
    }

    (function init() {
        content = $("#content").html();
        content = handleContent(content);
        $("#content").html(content).show();
    })();

    setInterval(function () {
        $.ajax({
            url: "/more?seek=" + seek + "&path=" + path,
            dataType: "json",
            success: function (data) {
                if (data.content) {
                    content = content + data.content;
                    $("#content").html(handleContent(content));
                    seek = data.seek;                   
                }
            }
        });;
    }, 5000);

</script>